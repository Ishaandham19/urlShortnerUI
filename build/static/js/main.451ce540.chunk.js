(this["webpackJsonpreact-hooks-jwt-auth"]=this["webpackJsonpreact-hooks-jwt-auth"]||[]).push([[0],{167:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a(48),n=a.n(s),c=a(9),l=a(4),i=a(3),o=(a(54),a(55),a(13)),j=a.n(o),d="http://localhost:8080/",u={register:function(e,t,a){return j.a.post(d+"register",{UserName:e,Email:t,Password:a})},login:function(e,t){return j.a.post(d+"login",{UserName:e,Password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},logout:function(){localStorage.removeItem("user")},getCurrentUser:function(){return JSON.parse(localStorage.getItem("user"))}},b=a(11),m=a.n(b),h=a(8),O=a.n(h),f=a(12),v=a.n(f),x=a(0),g=function(e){if(!e)return Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},p=function(){var e=Object(i.f)(),t=Object(r.useRef)(),a=Object(r.useRef)(),s=Object(r.useState)(""),n=Object(l.a)(s,2),c=n[0],o=n[1],j=Object(r.useState)(""),d=Object(l.a)(j,2),b=d[0],h=d[1],f=Object(r.useState)(!1),p=Object(l.a)(f,2),N=p[0],S=p[1],w=Object(r.useState)(""),y=Object(l.a)(w,2),U=y[0],k=y[1];return Object(x.jsx)("div",{className:"col-md-12 center-div",children:Object(x.jsx)("div",{className:"login-register-container card card-container",children:Object(x.jsxs)(m.a,{onSubmit:function(r){r.preventDefault(),k(""),S(!0),t.current.validateAll(),0===a.current.context._errors.length?u.login(c,b).then((function(){e("/"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();S(!1),k(t)})):S(!1)},ref:t,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"username",children:"Username"}),Object(x.jsx)(O.a,{type:"text",className:"form-control",name:"username",value:c,onChange:function(e){var t=e.target.value;o(t)},validations:[g]})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsx)(O.a,{type:"password",className:"form-control",name:"password",value:b,onChange:function(e){var t=e.target.value;h(t)},validations:[g]})]}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsxs)("button",{className:"btn btn-primary btn-block",disabled:N,children:[N&&Object(x.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(x.jsx)("span",{children:"Login"})]})}),U&&Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:U})}),Object(x.jsx)(v.a,{style:{display:"none"},ref:a})]})})})},N=a(49),S=function(e){if(!e)return Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},w=function(e){if(!Object(N.isEmail)(e))return Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},y=function(e){if(e.length<3||e.length>20)return Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},U=function(e){if(e.length<6||e.length>40)return Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},k=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useState)(""),s=Object(l.a)(a,2),n=s[0],c=s[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),j=o[0],d=o[1],b=Object(r.useState)(""),h=Object(l.a)(b,2),f=h[0],g=h[1],p=Object(r.useState)(!1),N=Object(l.a)(p,2),k=N[0],C=N[1],E=Object(r.useState)(""),T=Object(l.a)(E,2),R=T[0],A=T[1];return Object(x.jsx)("div",{className:"col-md-12 center-div",children:Object(x.jsx)("div",{className:"login-register-container card card-container",children:Object(x.jsxs)(m.a,{onSubmit:function(a){a.preventDefault(),A(""),C(!1),e.current.validateAll(),0===t.current.context._errors.length&&u.register(n,j,f).then((function(e){A(e.data.message),C(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();A(t),C(!1)}))},ref:e,children:[!k&&Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"username",children:"Username"}),Object(x.jsx)(O.a,{type:"text",className:"form-control",name:"username",value:n,onChange:function(e){var t=e.target.value;c(t)},validations:[S,y]})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email"}),Object(x.jsx)(O.a,{type:"text",className:"form-control",name:"email",value:j,onChange:function(e){var t=e.target.value;d(t)},validations:[S,w]})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsx)(O.a,{type:"password",className:"form-control",name:"password",value:f,onChange:function(e){var t=e.target.value;g(t)},validations:[S,U]})]}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),R&&Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("div",{className:k?"alert alert-success":"alert alert-danger",role:"alert",children:R})}),Object(x.jsx)(v.a,{style:{display:"none"},ref:t})]})})})};function C(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var E="http://localhost:8080/auth/",T={createUrl:function(e,t){var a={headers:C()},r={Url:e,Alias:t};return j.a.post(E+"url",r,a)},getUserUrls:function(){C();return j.a.get(E+"url",{headers:C()})}},R=function(e){e.alias;var t=e.shortUrl,a=e.url;t.length>30&&(t=t.substring(0,30)+" . . ."),a.length>45&&(a=a.substring(0,45)+" . . .");return Object(x.jsxs)("li",{className:"list-group-item",children:[Object(x.jsx)("i",{className:"fa fa-copy",onClick:function(){navigator.clipboard.writeText(t)}}),Object(x.jsx)("span",{className:"shorturl",children:t})," ",Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"url",children:a})]})},A=function(e){var t=e.update,a=Object(r.useState)([]),s=Object(l.a)(a,2),n=s[0],c=s[1];return Object(r.useEffect)((function(){T.getUserUrls().then((function(e){return c(e.data)})).catch((function(e){console.log(e)}))}),[t]),n?Object(x.jsx)("div",{className:"panel panel-primary",id:"result_panel",children:Object(x.jsx)("div",{className:"panel-body",children:Object(x.jsx)("ul",{className:"list-group",children:n.map((function(e){return Object(x.jsx)(R,{alias:e.Alias,shortUrl:e.ShortUrl,url:e.Url})}))})})}):Object(x.jsx)(x.Fragment,{})},F=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{id:"welcome-msg",className:"center-div gradient-text",children:Object(x.jsx)("h1",{children:"Welcome! Create your custom short urls"})}),Object(x.jsx)("div",{className:"center-div gradient-text",children:Object(x.jsx)("h3",{children:"Login to start!"})})]})},L=function(e){if(!RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$").test(e))return Object(x.jsx)("div",{className:"alert",role:"alert",children:"Not a valid url"})},z=function(e){if(!RegExp("^[A-Za-z0-9_]+$").test(e)&&e.length<50)return Object(x.jsx)("div",{className:"alert",role:"alert",children:"Alias must only contain alphabets, numbers and underscores"})},I=function(e){if(!e)return Object(x.jsx)("div",{className:"alert",role:"alert",children:"This field is required!"})},_=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useState)(null),s=Object(l.a)(a,2),n=s[0],c=s[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),j=o[0],d=o[1],b=Object(r.useState)(""),h=Object(l.a)(b,2),f=h[0],g=h[1],p=Object(r.useState)(!1),N=Object(l.a)(p,2),S=N[0],w=N[1],y=Object(r.useState)(""),U=Object(l.a)(y,2),k=U[0],C=U[1],E=Object(r.useState)(!1),R=Object(l.a)(E,2),_=R[0],J=R[1];Object(r.useEffect)((function(){c(u.getCurrentUser())}),[]);return n?Object(x.jsx)("div",{id:"home-container",className:"container-fluid",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{id:"form-container",className:"col-8",children:Object(x.jsx)("div",{className:"card-container",children:Object(x.jsxs)(m.a,{onSubmit:function(a){a.preventDefault(),C(""),w(!0),e.current.validateAll(),0===t.current.context._errors.length?T.createUrl(j,f).then((function(e){w(!1),navigator.clipboard.writeText(e.data.shortUrl),C("Copied short url to clipboard!"),J(!_)}),(function(e){var t=(e.response&&e.response.message)(e.response&&e.response.data&&e.response.data.message)||e.message||e.toString();w(!1),C(t)})):w(!1)},ref:e,children:[Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)(O.a,{type:"text",placeholder:"Enter a url",className:"form-control",name:"url",value:j,onChange:function(e){var t=e.target.value;d(t)},validations:[I,L]})}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)(O.a,{type:"text",placeholder:"Custom Alias",className:"form-control",name:"alias",value:f,onChange:function(e){var t=e.target.value;g(t)},validations:[I,z]})}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsxs)("button",{className:"btn btn-primary btn-block",disabled:S,children:[S&&Object(x.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(x.jsx)("span",{class:"gradient-text",children:"Shorten"})]})}),k&&Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("div",{className:"alert alert-dark",role:"alert",children:k})}),Object(x.jsx)(v.a,{style:{display:"none"},ref:t})]})})}),Object(x.jsx)("div",{className:"col",children:Object(x.jsx)(A,{update:_})})]})}):Object(x.jsx)(F,{})},J=function(){return Object(x.jsx)("footer",{className:"text-center",children:Object(x.jsxs)("a",{href:"https://github.com/Ishaandham19/urlShortner",children:[Object(x.jsx)("i",{className:"fa fa-github",style:{size:50}})," code"]})})},P={on:function(e,t){document.addEventListener(e,(function(e){return t(e.detail)}))},dispatch:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove:function(e,t){document.removeEventListener(e,t)}},q=function(){var e=Object(r.useState)(void 0),t=Object(l.a)(e,2),a=t[0],s=t[1];Object(r.useEffect)((function(){var e=u.getCurrentUser();return e&&s(e),P.on("logout",(function(){n()})),function(){P.remove("logout")}}),[]);var n=function(){u.logout()};return Object(x.jsxs)("div",{children:[Object(x.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(x.jsx)(c.b,{to:"/",className:"navbar-brand",children:"ShortURL"}),a?Object(x.jsx)("div",{className:"navbar-nav ml-auto",children:Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)("a",{href:"/login",className:"nav-link",onClick:n,children:"Logout"})})}):Object(x.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(c.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(c.b,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)(i.c,{children:[Object(x.jsx)(i.a,{path:"/",element:Object(x.jsx)(_,{})}),Object(x.jsx)(i.a,{path:"/login",element:Object(x.jsx)(p,{})}),Object(x.jsx)(i.a,{path:"/register",element:Object(x.jsx)(k,{})})]})}),Object(x.jsx)(J,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(Object(x.jsx)(c.a,{basename:"/app",children:Object(x.jsx)(q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,a){}},[[167,1,2]]]);
//# sourceMappingURL=main.451ce540.chunk.js.map